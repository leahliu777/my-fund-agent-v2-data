<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CIO Dashboard | 2026-02-20 00:24:39</title>
    <meta name="theme-color" content="#5c6bc0">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="spring-theme-fixed.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        /* æ¯æ—¥å¯¹è´¦é¡µé¢ä¸“å± */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .metric-value { contain: layout style paint; }
        .sector-bar { height: 16px; display: flex; border-radius: 8px; overflow: hidden; margin: 10px 0; background: rgba(0,0,0,0.08); }

        /* ç»ç’ƒè¡¨æ ¼å®¹å™¨ */
        .table-scroll-wrapper {
            width: 100%; overflow-x: auto; margin: 20px 0; border-radius: 20px;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
        }
        .table-scroll-wrapper.custom-scrollbar { -webkit-overflow-scrolling: touch; }
        .table-scroll-wrapper::-webkit-scrollbar { width: 6px; height: 6px; }
        .table-scroll-wrapper::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 10px; }
        .table-scroll-wrapper::-webkit-scrollbar-thumb { background: rgba(92, 107, 192, 0.3); border-radius: 10px; }
        .table-scroll-wrapper::-webkit-scrollbar-thumb:hover { background: rgba(92, 107, 192, 0.5); }

        table { width: 100%; border-collapse: collapse; min-width: 650px; }
        th, td { padding: 14px 10px; text-align: left; border-bottom: 1px solid rgba(0,0,0,0.08); white-space: nowrap; font-size: 14px; color: var(--text); }
        th { background: rgba(92, 107, 192, 0.15); color: var(--primary); font-size: 11px; text-transform: uppercase; }
        .text-right { text-align: right; }

        .ai-report h2 { font-size: 16px; color: var(--primary); margin: 35px 0 15px; border-left: 4px solid var(--primary); padding-left: 15px; }
        .ai-report ul { list-style: none; padding-left: 10px; }
        .ai-report li { margin-bottom: 12px; color: var(--text-muted); line-height: 1.8; position: relative; padding-left: 20px; font-size: 14px; }
        .ai-report li::before { content: "â€¢"; color: var(--primary); position: absolute; left: 0; font-weight: bold; }

        /* ç»ç’ƒæ°”è±¡ç«™ */
        .weather-drawer {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(30px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
            margin: 0; width: 100%;
        }
        .summary-bar { padding: 12px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; list-style: none; min-height: 44px; }
        .macro-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; padding: 0 20px 20px; }
        .macro-card {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            padding: 12px; border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-left: 3px solid;
        }

        /* Login Modal - æ—¥æŠ¥ä¸“å±ï¼ˆtheme.css å·²æœ‰åŸºç¡€æ ·å¼ï¼‰*/
        .modal { display: none; position: fixed; z-index: 11000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(4px); justify-content: center; align-items: center; }
        .modal.show { display: flex; }
        .modal-content {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            padding: 30px; border-radius: 20px; max-width: 400px; width: 90%;
            text-align: center; border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
        }
        .modal-content input {
            width: 80%; padding: 12px 16px; margin: 15px 0;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px; font-size: 16px; color: var(--text);
            transition: all 0.3s ease;
        }
        .modal-content input:focus {
            background: rgba(255, 255, 255, 0.7);
            border-color: rgba(92, 107, 192, 0.6);
            outline: none;
            box-shadow: 0 0 0 4px rgba(92, 107, 192, 0.1);
        }
        .modal-content input::placeholder { color: rgba(0, 0, 0, 0.4); }
        .modal-content button {
            width: 85%; padding: 12px 24px;
            background: rgba(92, 107, 192, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(92, 107, 192, 0.5);
            border-radius: 12px; color: #3f51b5; font-weight: 600; font-size: 16px; cursor: pointer;
            transition: all 0.3s ease;
        }
        .modal-content button:hover { background: rgba(92, 107, 192, 0.6); transform: scale(1.02); }
        .modal-content button:active { transform: scale(0.98); }
        #loginStatus {
            position: fixed; top: 12px; right: 12px;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px);
            padding: 10px 16px; border-radius: 20px;
            display: flex; align-items: center; gap: 10px; z-index: 10000; cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 16px rgba(31, 38, 135, 0.15);
            transition: all 0.3s ease; min-height: 44px; -webkit-tap-highlight-color: transparent;
        }
        #loginStatus:hover { background: rgba(255, 255, 255, 0.6); }
        #loginStatus:active { transform: scale(0.96); opacity: 0.9; }

        /* --- ç§»åŠ¨ç«¯ä¼˜åŒ– --- */
        @media (max-width: 768px) {
            .container { padding: 16px; }
            .card { border-radius: 16px; padding: 16px; }
            .stat-grid { grid-template-columns: 1fr; gap: 16px; }
            .chart-row-2 { grid-template-columns: 1fr !important; }
            h1 { font-size: 28px; } h2 { font-size: 22px; } h3 { font-size: 18px; }
            body { font-size: 16px; }
            .table-scroll-wrapper .holdings-table tbody tr {
                display: block;
                background: rgba(255, 255, 255, 0.4);
                margin-bottom: 1rem;
                border-radius: 12px;
                padding: 1rem;
                border: 1px solid rgba(255, 255, 255, 0.5);
            }
            .table-scroll-wrapper .holdings-table thead { display: none; }
            .table-scroll-wrapper .holdings-table tbody td {
                display: flex;
                justify-content: space-between;
                padding: 0.5rem 0;
                border-bottom: 1px solid rgba(0,0,0,0.08);
                text-align: right;
            }
            .table-scroll-wrapper .holdings-table tbody td:last-child { border-bottom: none; }
            .table-scroll-wrapper .holdings-table tbody td::before {
                content: attr(data-label);
                font-weight: bold;
                text-align: left;
                margin-right: 1rem;
                color: var(--text-muted);
            }
        }
        @media (max-width: 600px) { .stat-grid { grid-template-columns: 1fr; } .container { padding: 15px; } }

        /* å¹³æ¿ç«¯ */
        @media (min-width: 769px) and (max-width: 1024px) { .stat-grid { gap: 20px; } }
    </style>
</head>
<body>
    <div id="loginStatus" onclick="handleStatusClick()">
        <span id="statusText"></span>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>ğŸ” æŸ¥çœ‹å®Œæ•´æ•°æ®</h2>
            <input type="password" id="passwordInput" placeholder="è¯·è¾“å…¥å¯†ç " onkeypress="if(event.key==='Enter') login()">
            <button onclick="login()">æˆæƒ</button>
            <p id="loginError" style="color:#ef5350; margin-top:10px;"></p>
        </div>
    </div>
    <div id="tooltip" class="tooltip"></div>

    <nav class="nav-tabs tab-nav"><a href="index.html" class="nav-tab active">æ¯æ—¥å¯¹è´¦</a><a href="analysis.html" class="nav-tab">æ·±åº¦å½’å› </a><a href="history.html" class="nav-tab">å†å²å›æµ‹</a><a href="knowledge.html" class="nav-tab">æŠ•èµ„å­—å…¸</a><a href="screener.html" class="nav-tab">åŸºé‡‘ç­›é€‰</a></nav>

    <details class="weather-drawer">
        <summary class="summary-bar">
            <div style="font-weight:bold; color:#66bb6a">å®è§‚æ°”è±¡ç«™ï¼šæŒç»­é¡ºé£ (Score: 15.07)</div>
            <div style="font-size:12px; color:#1a1a1a">2026-02-20 00:24:39</div>
        </summary>
        <div class="macro-grid"><div class="macro-card" style="border-color:#66bb6a"><div style="font-size:10px;color:#1a1a1a">US10Y</div><div style="font-weight:bold">4.09% ğŸŸ¢</div><div style="font-size:10px;color:#1a1a1a">ä½äº4.2%æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#ef5350"><div style="font-size:10px;color:#1a1a1a">VIX</div><div style="font-weight:bold">20.3 ğŸ”´</div><div style="font-size:10px;color:#1a1a1a">ä½äº20æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#66bb6a"><div style="font-size:10px;color:#1a1a1a">DXY</div><div style="font-weight:bold">97.9 ğŸŸ¢</div><div style="font-size:10px;color:#1a1a1a">ä½äº104æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#66bb6a"><div style="font-size:10px;color:#1a1a1a">CNH</div><div style="font-weight:bold">6.898 ğŸŸ¢</div><div style="font-size:10px;color:#1a1a1a">ä½äº7.3æœ‰åˆ©</div></div></div>
    </details>

    <div class="container">
        <div class="card bento-item" style="margin-bottom:16px">
            <h3 style="margin-bottom:8px">æ¯æ—¥AIç®€è¯„</h3>
            <p style="font-size:14px; line-height:1.6; color:var(--text-primary); white-space:pre-wrap;">ã€å¸‚åœºæ€»ç»“ã€‘å¸‚åœºé¿é™©æƒ…ç»ªå‡æ¸©ï¼Œç¾å€ºæ”¶ç›Šç‡å›è½ä½†ææ…ŒæŒ‡æ•°åé«˜ï¼Œç»„åˆå°å¹…å›æ’¤ã€‚
ã€æ“ä½œå»ºè®®ã€‘ä¿æŒè°¨æ…ï¼Œå¯å°å¹…å¢æŒé˜²å¾¡æ€§èµ„äº§ï¼Œé¿å…æ¿€è¿›æ“ä½œã€‚</p>
        </div>
        <div class="stat-grid">
            <div class="card">
                <div style="font-size:11px;color:#1a1a1a;letter-spacing:1px">7D ASSET TREND</div>
                <div style="height:45px"><canvas id="trendChart"></canvas></div>
                <div id="mv_display" class="metric-value value-large" style="margin-top:10px; font-family:monospace"></div>
            </div>
            <div class="card">
                <div style="font-size:11px;color:#1a1a1a;letter-spacing:1px">PORTFOLIO MIX</div>
                <div class="sector-bar"><div style="width:33.24362877130561%; background:#5c6bc0" title="Resource"></div><div style="width:28.485051293410287%; background:#7986cb" title="Pension"></div><div style="width:24.89315838805142%; background:#66bb6a" title="Dividend"></div><div style="width:13.37816154723271%; background:#ffa726" title="Tech"></div></div>
                <div style="display:flex; flex-wrap:wrap; gap:8px"><span style="color:#5c6bc0; margin-right:10px; font-size:10px">â— Resource 33%</span><span style="color:#7986cb; margin-right:10px; font-size:10px">â— Pension 28%</span><span style="color:#66bb6a; margin-right:10px; font-size:10px">â— Dividend 25%</span><span style="color:#ffa726; margin-right:10px; font-size:10px">â— Tech 13%</span></div>
                <div id="pnl_display" class="metric-value value-large" style="margin-top:10px; font-family:monospace"></div>
            </div>
        </div>

        <div class="d-flex justify-between align-center mb-md" style="margin-top:20px">
            <h3>åŸºé‡‘æŒä»“</h3>
            <button class="btn btn-sm" onclick="toggleCompactMode()"><span id="compactModeText">ç´§å‡‘æ¨¡å¼</span></button>
        </div>
        <div id="holdingsContainer" class="table-scroll-wrapper custom-scrollbar holdings-compact">
            <table id="holdings_table" class="holdings-table"></table>
        </div>

        <div class="card" style="margin-top:20px">
            <div class="chart-row-2" style="display:grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                <div><div style="font-size:11px;letter-spacing:1px;margin-bottom:8px"><span class="glossary-term" data-tip="ä»æœŸåˆè‡³ä»Šçš„å¤åˆæ”¶ç›Šç™¾åˆ†æ¯”ï¼Œåæ˜ é•¿æœŸæŠ•èµ„è¡¨ç°ã€‚">ç´¯è®¡æ”¶ç›Šç‡</span></div><div id="cumulative_return_chart" style="width:100%; height:220px;"></div></div>
                <div><div style="font-size:11px;letter-spacing:1px;margin-bottom:8px"><span class="glossary-term" data-tip="å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œè¡¡é‡æœ€å¤§äºæŸå¹…åº¦ã€‚">å†å²å›æ’¤</span></div><div id="drawdown_chart" style="width:100%; height:220px;"></div></div>
            </div>
        </div>

        <div class="ai-report" id="ai-report"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const privateData = {"mv_display": "Â¥21,902.89", "pnl_display": "Â¥-246.78", "pnl_color": "var(--down)", "funds": [{"name": "åˆ›é‡‘åˆä¿¡ä¸­è¯çº¢åˆ©ä½æ³¢æŒ‡æ•°C", "mode": "ä¼°å€¼", "mv": "Â¥3,439", "rate": -1.06, "pnl": "Â¥-36.46", "cum": 1.9929834905660249, "grid": "-", "acc": "A"}, {"name": "å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)A", "mode": "ä¼°å€¼", "mv": "Â¥1,395", "rate": 0.76, "pnl": "Â¥+10.60", "cum": -0.3894936582442998, "grid": "-", "acc": "A"}, {"name": "å¯Œå›½æ²ªæ·±300å¢å¼ºA", "mode": "ä¼°å€¼", "mv": "Â¥2,013", "rate": -1.25, "pnl": "Â¥-25.16", "cum": 8.546941230381488, "grid": "-", "acc": "A"}, {"name": "å˜‰å®ä¸Šæµ·é‡‘ETFè”æ¥C", "mode": "å®æ—¶", "mv": "Â¥3,153", "rate": 0.3233855674218855, "pnl": "Â¥+10.20", "cum": 5.809510656907446, "grid": "-", "acc": "A"}, {"name": "ä¸œæ–¹çº¢é¢å’Œç§¯æå…»è€äº”å¹´(FOF)Y", "mode": "ä¼°å€¼", "mv": "Â¥3,118", "rate": -0.58, "pnl": "Â¥-18.09", "cum": 3.9415130324221392, "grid": "-", "acc": "B"}, {"name": "å¹¿å‘å…»è€2050äº”å¹´æŒæœ‰æœŸæ··åˆ(FOF)Y", "mode": "ä¼°å€¼", "mv": "Â¥3,121", "rate": -1.1, "pnl": "Â¥-34.33", "cum": 4.030390738060796, "grid": "-", "acc": "B"}, {"name": "åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A", "mode": "ä¼°å€¼", "mv": "Â¥4,128", "rate": -3.5, "pnl": "Â¥-144.48", "cum": -1.190069607892219, "grid": "<span style='color:#66bb6a;font-weight:bold'>[BUY]</span>", "acc": "A"}, {"name": "åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C", "mode": "ä¼°å€¼", "mv": "Â¥1,536", "rate": -0.59, "pnl": "Â¥-9.06", "cum": -4.49945634815011, "grid": "-", "acc": "A"}], "t_values": [16800.0, 16850.0, 16834.8, 16832.63]};
        const publicData = {"mv_display": "å·²éšè—", "pnl_display": "-1.13%", "pnl_color": "var(--down)", "funds": [{"name": "åˆ›é‡‘åˆä¿¡ä¸­è¯çº¢åˆ©ä½æ³¢æŒ‡æ•°C", "mode": "ä¼°å€¼", "weight": "15.7%", "rate": -1.06, "cum": 1.9929834905660249, "grid": "-", "acc": "A"}, {"name": "å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)A", "mode": "ä¼°å€¼", "weight": "6.4%", "rate": 0.76, "cum": -0.3894936582442998, "grid": "-", "acc": "A"}, {"name": "å¯Œå›½æ²ªæ·±300å¢å¼ºA", "mode": "ä¼°å€¼", "weight": "9.2%", "rate": -1.25, "cum": 8.546941230381488, "grid": "-", "acc": "A"}, {"name": "å˜‰å®ä¸Šæµ·é‡‘ETFè”æ¥C", "mode": "å®æ—¶", "weight": "14.4%", "rate": 0.3233855674218855, "cum": 5.809510656907446, "grid": "-", "acc": "A"}, {"name": "ä¸œæ–¹çº¢é¢å’Œç§¯æå…»è€äº”å¹´(FOF)Y", "mode": "ä¼°å€¼", "weight": "14.2%", "rate": -0.58, "cum": 3.9415130324221392, "grid": "-", "acc": "B"}, {"name": "å¹¿å‘å…»è€2050äº”å¹´æŒæœ‰æœŸæ··åˆ(FOF)Y", "mode": "ä¼°å€¼", "weight": "14.2%", "rate": -1.1, "cum": 4.030390738060796, "grid": "-", "acc": "B"}, {"name": "åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A", "mode": "ä¼°å€¼", "weight": "18.8%", "rate": -3.5, "cum": -1.190069607892219, "grid": "<span style='color:#66bb6a;font-weight:bold'>[BUY]</span>", "acc": "A"}, {"name": "åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C", "mode": "ä¼°å€¼", "weight": "7.0%", "rate": -0.59, "cum": -4.49945634815011, "grid": "-", "acc": "A"}], "t_values": [0.0, 0.29761904761904656, 0.2071428571428502, 0.19422619047619882]};
        const aiReport = "## 1. ç›ˆäºçœŸç›¸ (Who made/lost money)\n* ä»Šæ—¥æ•´ä½“äºæŸ-1.13%ï¼Œç”±Aè‚¡èµ„äº§æ™®éä¸‹è·Œé©±åŠ¨ï¼Œç¬¦åˆã€äºæŸä¸‹è·Œã€‘å®šæ€§ã€‚äºæŸä¸»è¦åŒ…è¢±æ˜¯**åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A (-3.50%)**å’Œ**å¯Œå›½æ²ªæ·±300å¢å¼ºA (-1.25%)**ã€‚å”¯ä¸€æ˜¾è‘—ç›ˆåˆ©åŠŸè‡£æ˜¯**å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)A (+0.76%)**ï¼Œå˜‰å®ä¸Šæµ·é‡‘å¾®æ¶¨(+0.32%)æä¾›å¾®å¼±å¯¹å†²ã€‚\n* è´¦æˆ·Aï¼ˆä¸»åŠ¨ç­–ç•¥ï¼‰ä¸è´¦æˆ·Bï¼ˆå…»è€é˜²å¾¡ï¼‰å‡å½•å¾—äºæŸï¼Œä½†è¡¨ç°åˆ†åŒ–ç¬¦åˆé¢„æœŸï¼šè´¦æˆ·Aï¼ˆä»¥æ²ªæ·±300ã€è¡Œä¸šæŒ‡æ•°ä¸ºä»£è¡¨ï¼‰å—å›½å†…è‚¡å¸‚ç³»ç»Ÿæ€§ä¸‹è·Œå†²å‡»æ›´å¤§ï¼›è´¦æˆ·Bï¼ˆFOFå…»è€åŸºé‡‘ï¼‰è·Œå¹…ç›¸å¯¹æ¸©å’Œï¼ˆ-0.58%è‡³-1.10%ï¼‰ï¼Œå…¶åˆ†æ•£åŒ–ä¸é˜²å¾¡å±æ€§åœ¨ä¸‹è·Œå¸‚ä¸­éƒ¨åˆ†æ˜¾ç°ï¼Œä½†æœªèƒ½å®Œå…¨æŠµæ¶ˆå¸‚åœºè´å¡”é£é™©ã€‚\n\n## 2. å¤§ç¯å¢ƒä¼ å¯¼å®¡è®¡ (Macro Push & Pull)\n* **ç¾å€ºæ”¶ç›Šç‡(US10Y) 4.086% ä¸ç¾å…ƒæŒ‡æ•°(DXY) 97.895 å¤„äºä¸­æ€§åå¼ºæ°´å¹³**ï¼Œå åŠ **åŒ—å‘èµ„é‡‘å¤§å¹…å‡€æµå‡º**ï¼Œå…±åŒæ„æˆå¯¹Aè‚¡çš„æ ¸å¿ƒé€†é£ï¼š1) æå‡å…¨çƒæ— é£é™©åˆ©ç‡é”šï¼Œå‹åˆ¶æƒç›Šèµ„äº§ä¼°å€¼ï¼›2) å¼ºåŒ–ç¾å…ƒèµ„äº§å¸å¼•åŠ›ï¼Œå¯¼è‡´å¤–èµ„ä»Aè‚¡æ’¤ç¦»ã€‚è¿™ç›´æ¥ç©¿é€æ‰“å‡»äº†**å¯Œå›½æ²ªæ·±300å¢å¼ºA**ï¼ˆå¤§ç›˜è“ç­¹ï¼‰å’Œ**åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A**ï¼ˆå‘¨æœŸæ¿å—å¯¹åˆ©ç‡ä¸å…¨çƒéœ€æ±‚æ•æ„Ÿï¼‰ï¼Œé€ æˆå…¶å¤§å¹…ä¸‹è·Œã€‚\n* **ææ…ŒæŒ‡æ•°(VIX) 20.29 ä¸­æ€§**ï¼Œæ˜¾ç¤ºå…¨çƒå¸‚åœºæœªå‡ºç°æç«¯ææ…Œï¼Œç¾è‚¡ç›¸å¯¹ç¨³å®šã€‚è¿™è§£é‡Šäº†**å—æ–¹çº³æ–¯è¾¾å…‹100**å¾—ä»¥é€†åŠ¿æ”¶æ¶¨çš„åŸå› ï¼Œå…¶è¡¨ç°ä¸Aè‚¡è„±é’©ï¼Œä¸»è¦å—å…¶è‡ªèº«ç§‘æŠ€è‚¡åŸºæœ¬é¢åŠç¾å›½å¸‚åœºæƒ…ç»ªé©±åŠ¨ã€‚åœ¨å®è§‚é€†é£ä¸‹ï¼Œç»„åˆæ•´ä½“å‘ˆç°æ˜¾è‘—çš„**è´Ÿè´å¡”**è¡¨ç°ï¼ˆè·ŸéšAè‚¡ä¸‹è·Œï¼‰ï¼Œä½†é€šè¿‡çº³æ–¯è¾¾å…‹ä¸é»„é‡‘èµ„äº§çš„é…ç½®ï¼Œè·å¾—äº†æœ‰é™çš„**æ­£é˜¿å°”æ³•**ï¼ˆç»„åˆè·Œå¹…ç•¥å°äºæ²ªæ·±300ç­‰ä¸»è¦Aè‚¡æŒ‡æ•°ï¼‰ï¼Œéƒ¨åˆ†å¯¹å†²äº†ç³»ç»Ÿæ€§é£é™©ã€‚\n\n## 3. ç»„åˆçŠ¶å†µåˆ†æ (Health Check)\n* å•æ—¥-1.13%çš„æ³¢åŠ¨åœ¨æƒç›ŠæŠ•èµ„ç»„åˆçš„æ­£å¸¸æ³¢åŠ¨èŒƒå›´å†…ï¼Œä½†éœ€è­¦æƒ•ç”±æœ‰è‰²é‡‘å±ï¼ˆ-3.50%ï¼‰ç­‰å•ä¸€è¡Œä¸šæš´éœ²å¼•å‘çš„æ³¢åŠ¨æ”¾å¤§ã€‚ä»Šæ—¥å›æ’¤ä¸»è¦ç”±å¸‚åœºç³»ç»Ÿæ€§é£é™©å¼•å‘ï¼Œéä¸ªè‚¡ç‰¹å¼‚æ€§é£é™©ã€‚\n* å¯¹æ¯”å†å²æœ€å¤§å›æ’¤é˜ˆå€¼ï¼Œéœ€å®¡è§†ï¼šè‹¥å½“å‰å®è§‚é€†é£ï¼ˆå¤–èµ„æµå‡ºã€åˆ©ç‡å‹åŠ›ï¼‰æŒç»­ï¼ŒAè‚¡éƒ¨åˆ†å¯èƒ½é¢ä¸´è¿›ä¸€æ­¥å›æ’¤å‹åŠ›ã€‚ç»„åˆä¸­çº³æ–¯è¾¾å…‹ä¸é»„é‡‘çš„è´Ÿç›¸å…³æ€§ç›®å‰æä¾›äº†ä¸€å®šç¼“å†²ï¼Œä½†Aè‚¡èµ„äº§æƒé‡è¾ƒé«˜ï¼Œæ•´ä½“ç»„åˆå¥åº·è´¨é‡é¢ä¸´è€ƒéªŒï¼Œéœ€é˜²èŒƒå›æ’¤å¹…åº¦å‘å†å²é˜ˆå€¼é è¿‘çš„é£é™©ã€‚\n\n## 4. æˆ˜æœ¯è°ƒä»“æŒ‡ä»¤ (Tactical Orders)\n* **å‡ä»“/è½¬æ¢**ï¼šé‰´äºåŒ—å‘èµ„é‡‘æŒç»­æµå‡ºåŠè¡Œä¸šåŸºæœ¬é¢æ‰¿å‹ï¼Œ**ç«‹å³å‡æŒã€åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥Aã€‘**ï¼Œè¯¥å“ç§æ³¢åŠ¨å‰§çƒˆä¸”å¯¹å½“å‰å®è§‚ç¯å¢ƒæ•æ„Ÿï¼Œæ˜¯ç»„åˆçš„ä¸»è¦é£é™©æ•å£ã€‚\n* **å†å¹³è¡¡/å¯¹å†²**ï¼šå°†å‡æŒæœ‰è‰²é‡‘å±æ‰€å¾—èµ„é‡‘ï¼Œéƒ¨åˆ†å¢é…è‡³ã€å˜‰å®ä¸Šæµ·é‡‘ETFè”æ¥Cã€‘ä»¥æå‡é˜²å¾¡å±æ€§ï¼Œéƒ¨åˆ†ç”¨äºå°å¹…å¢æŒã€å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)Aã€‘ï¼Œåˆ©ç”¨å…¶ä¸Aè‚¡çš„ä½ç›¸å…³æ€§æ”¹å–„ç»„åˆé£é™©æ”¶ç›Šæ¯”ã€‚\n* **æŒä»“ç›‘æ§**ï¼šç»´æŒå¯¹ã€å¯Œå›½æ²ªæ·±300å¢å¼ºAã€‘çš„ç›‘æ§ï¼Œè‹¥åŒ—å‘èµ„é‡‘æµå‡ºè¶‹åŠ¿æ— æ”¹å–„æˆ–å¤§ç›˜è·Œç ´å…³é”®æ”¯æ’‘ï¼Œå‡†å¤‡æ‰§è¡Œé˜¶æ¢¯å¼å‡ä»“ä»¥æ§åˆ¶æ•´ä½“è´å¡”æš´éœ²ã€‚è´¦æˆ·Bï¼ˆå…»è€FOFï¼‰æš‚ä¿æŒä¸åŠ¨ï¼Œå…¶èµ„äº§é…ç½®å†å¹³è¡¡åº”ç”±å†…éƒ¨æœºåˆ¶å®Œæˆã€‚";
        const PASSWORD_HASH = "608f4a69d48963560e8c0fcb2f6da1a51e87b117dcf1b3054038f7cbd8660def";

        const GLOSSARY = {
            'US10Y': 'ç¾å€º10Yæ”¶ç›Šç‡ã€‚å…¨çƒèµ„äº§å®šä»·ä¹‹é”šï¼Œåæ˜ å¸‚åœºå¯¹é•¿æœŸé€šèƒ€ä¸æ— é£é™©åˆ©ç‡çš„é¢„æœŸã€‚',
            'DXY': 'ç¾å…ƒæŒ‡æ•°ã€‚è¡¡é‡ç¾å…ƒå¯¹ä¸€ç¯®å­è´§å¸çš„å¼ºåº¦ï¼Œå…¶èµ°å¼ºé€šå¸¸å¯¹æ–°å…´å¸‚åœºæµåŠ¨æ€§æ„æˆå‹åŠ›ã€‚',
            'VIX': 'æ³¢åŠ¨ç‡æŒ‡æ•°ï¼ˆææ…ŒæŒ‡æ•°ï¼‰ã€‚è¡¡é‡æ ‡æ™®500æœŸæƒè•´å«çš„éšå«æ³¢åŠ¨ç‡ï¼Œæ•°å€¼é«˜ä¼åæ˜ é¿é™©æƒ…ç»ªæµ“åšã€‚',
            'å›æ’¤': 'æœ€å¤§å›æ’¤ï¼ˆMDDï¼‰ã€‚èµ„äº§å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œæ˜¯è¯„ä¼°é£é™©æ§åˆ¶èƒ½åŠ›çš„å…³é”®æŒ‡æ ‡ã€‚',
            'å†å²å›æ’¤': 'å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œè¡¡é‡æœ€å¤§äºæŸå¹…åº¦ã€‚',
            'ç´¯è®¡æ”¶ç›Šç‡': 'ä»æœŸåˆè‡³ä»Šçš„å¤åˆæ”¶ç›Šç™¾åˆ†æ¯”ï¼Œåæ˜ é•¿æœŸæŠ•èµ„è¡¨ç°ã€‚',
            'é˜¿å°”æ³•': 'è¶…é¢æ”¶ç›Šï¼ˆAlphaï¼‰ã€‚ç‹¬ç«‹äºå¸‚åœºæ³¢åŠ¨ä¹‹å¤–çš„è·åˆ©èƒ½åŠ›ï¼Œä½“ç°ä¸»åŠ¨ç®¡ç†çš„é€‰è‚¡æº¢ä»·ã€‚',
            'è´å¡”': 'ç³»ç»Ÿæ€§æ”¶ç›Šï¼ˆBetaï¼‰ã€‚ä¸å¤§ç›˜æ³¢åŠ¨ç›¸å…³çš„æ”¶ç›Šéƒ¨åˆ†ï¼Œåæ˜ ç»„åˆå¯¹å¸‚åœºæ•´ä½“é£é™©çš„æš´éœ²ç¨‹åº¦ã€‚',
            'æ³¢åŠ¨ç‡': 'æ”¶ç›Šç‡ç¦»æ•£ç¨‹åº¦ã€‚é‡åŒ–èµ„äº§ä»·æ ¼æ³¢åŠ¨çš„å‰§çƒˆç¨‹åº¦ï¼Œæ˜¯ç°ä»£æŠ•èµ„ç»„åˆé£é™©å®šä»·çš„æ ¸å¿ƒã€‚',
            'å†å¹³è¡¡': 'èµ„äº§æƒé‡çº åã€‚é€šè¿‡å‡æŒè¶…é…èµ„äº§ã€å¢æŒä½é…èµ„äº§ï¼Œå¼ºåˆ¶ä½¿ç»„åˆå›å½’ç›®æ ‡é£é™©æ°´å¹³ã€‚',
            'åŸºå‡†': 'ä¸šç»©æ¯”è¾ƒåŸºå‡†ï¼ˆBenchmarkï¼‰ã€‚å®¢è§‚è¯„ä»·ç»„åˆè·åˆ©èƒ½åŠ›æ˜¯å¦è¾¾æ ‡çš„å‚ç…§ç³»ã€‚'
        };
        const sortedTerms = Object.keys(GLOSSARY).sort((a, b) => b.length - a.length);
        function walkAndReplace(node) {
            if (node.nodeType === 3) {
                let text = node.data;
                let hasChange = false;
                sortedTerms.forEach(term => {
                    if (text.includes(term)) { text = text.replace(new RegExp(term, 'g'), `@@${term}@@`); hasChange = true; }
                });
                if (hasChange) {
                    const span = document.createElement('span');
                    span.innerHTML = text.replace(/@@(.*?)@@/g, (m, p1) => `<span class="glossary-term" data-tip="${GLOSSARY[p1]}">${p1}</span>`);
                    node.parentNode.replaceChild(span, node);
                }
            } else {
                for (let i = node.childNodes.length - 1; i >= 0; i--) {
                    if (node.childNodes[i].className !== 'glossary-term') walkAndReplace(node.childNodes[i]);
                }
            }
        }
        const trendDates = ["01-14", "01-15", "01-16", "01-17"];
        const echartsConfig = {"cumulative_return": {"xAxis": {"type": "category", "data": ["2026-01-14", "2026-01-15", "2026-01-16", "2026-01-17"]}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%"}}, "series": [{"data": [0.0, 0.3, 0.21, 0.19], "type": "line", "smooth": true, "itemStyle": {"color": "#5c6bc0"}}]}, "drawdown": {"xAxis": {"type": "category", "data": ["2026-01-14", "2026-01-15", "2026-01-16", "2026-01-17"]}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%"}}, "series": [{"data": [0.0, 0.0, -0.09, -0.1], "type": "line", "smooth": true, "itemStyle": {"color": "#ef5350"}, "areaStyle": {"color": "rgba(239,83,80,0.2)"}}]}};

        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        function renderData(data, isPrivate) {
            document.getElementById('mv_display').textContent = data.mv_display;
            const pnlEl = document.getElementById('pnl_display');
            pnlEl.textContent = data.pnl_display;
            pnlEl.style.color = data.pnl_color;

            const table = document.getElementById('holdings_table');
            let tableHeader = '<thead><tr><th>åŸºé‡‘èµ„äº§ (MODE)</th>';
            if (isPrivate) {
                tableHeader += '<th class="text-right">å¸‚å€¼</th><th class="text-right">å½“æ—¥%</th><th class="text-right">å½“æ—¥&plusmn;</th><th class="text-right">ç´¯è®¡</th><th class="text-right">ä¿¡å·</th></tr></thead>';
            } else {
                tableHeader += '<th class="text-right">å æ¯”</th><th class="text-right">å½“æ—¥%</th><th class="text-right">ç´¯è®¡</th><th class="text-right">ä¿¡å·</th></tr></thead>';
            }

            let tableBody = '<tbody>';
            ['A', 'B'].forEach(acc => {
                data.funds.filter(f => f.acc === acc).forEach(f => {
                    const rateColor = f.rate >= 0 ? 'var(--up)' : 'var(--down)';
                    const rateCls = f.rate >= 0 ? 'value-positive' : 'value-negative';
                    const cumCls = f.cum >= 0 ? 'value-positive' : 'value-negative';
                    tableBody += `<tr><td data-label="åŸºé‡‘åç§°" style="font-weight:bold;">${f.name} <small class="text-muted">[${f.mode}]</small></td>`;
                    if (isPrivate) {
                        tableBody += `<td data-label="å¸‚å€¼" class="text-right value-neutral">${f.mv}</td><td data-label="å½“æ—¥%" class="text-right ${rateCls}">${f.rate.toFixed(2)}%</td><td data-label="å½“æ—¥Â±" class="text-right ${rateCls}">${f.pnl}</td>`;
                    } else {
                        tableBody += `<td data-label="å æ¯”" class="text-right value-neutral">${f.weight}</td><td data-label="å½“æ—¥%" class="text-right ${rateCls}">${f.rate.toFixed(2)}%</td>`;
                    }
                    tableBody += `<td data-label="ç´¯è®¡" class="text-right ${cumCls}">${f.cum.toFixed(2)}%</td><td data-label="ä¿¡å·" class="text-right">${f.grid}</td></tr>`;
                });
            });
            tableBody += '</tbody>';
            table.innerHTML = tableHeader + tableBody;

            // æ¸²æŸ“AIæŠ¥å‘Šï¼ˆå«æŠ•èµ„å­—å…¸æ‚¬æµ®æç¤ºï¼‰
            try {
                const aiEl = document.getElementById('ai-report');
                aiEl.innerHTML = marked.parse(aiReport);
                walkAndReplace(aiEl);
            } catch(e) {
                document.getElementById('ai-report').innerHTML = '<p style="color:#ef5350;">AIæŠ¥å‘Šæ¸²æŸ“å¤±è´¥</p>';
            }

            // æ¸²æŸ“è¶‹åŠ¿å›¾
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            if(window.myChart) window.myChart.destroy();
            const grad = trendCtx.createLinearGradient(0, 0, 0, 200);
            grad.addColorStop(0, 'rgba(92, 107, 192, 0.3)');
            grad.addColorStop(1, 'rgba(92, 107, 192, 0)');
            window.myChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: trendDates,
                    datasets: [{
                        data: data.t_values,
                        borderColor: '#5c6bc0',
                        backgroundColor: grad,
                        borderWidth: 2,
                        pointRadius: 0,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    plugins: { legend: { display: false } },
                    scales: { x: { display: false }, y: { display: false } },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function showPrivateData() {
            document.getElementById('statusText').textContent = 'ğŸŸ¢ å®Œæ•´æ¨¡å¼';
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('loginModal').classList.remove('show');
            renderData(privateData, true);
        }

        function showPublicData() {
            document.getElementById('statusText').textContent = 'âšªï¸ å…¬å¼€æ¨¡å¼';
            renderData(publicData, false);
        }

        function handleStatusClick() {
            const isLoggedIn = localStorage.getItem('fundAgentLoggedIn') === 'true';
            if (isLoggedIn) {
                if(confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                    logout();
                }
            } else {
                document.getElementById('loginModal').style.display = 'flex';
                document.getElementById('loginModal').classList.add('show');
            }
        }

        async function login() {
            const password = document.getElementById('passwordInput').value;
            if (!password) {
                document.getElementById('loginError').textContent = 'è¯·è¾“å…¥å¯†ç ';
                return;
            }

            const hash = await sha256(password);
            if (hash === PASSWORD_HASH) {
                localStorage.setItem('fundAgentLoggedIn', 'true');
                showPrivateData();
                document.getElementById('passwordInput').value = '';
                document.getElementById('loginError').textContent = '';
            } else {
                document.getElementById('loginError').textContent = 'å¯†ç é”™è¯¯';
                setTimeout(() => { document.getElementById('loginError').textContent = ''; }, 2000);
            }
        }

        function logout() {
            localStorage.removeItem('fundAgentLoggedIn');
            showPublicData();
        }

        // ECharts ç´¯è®¡æ”¶ç›Šä¸å›æ’¤
        function initEchartsCharts() {
            if (typeof echarts === 'undefined') return;
            const cumEl = document.getElementById('cumulative_return_chart');
            const ddEl = document.getElementById('drawdown_chart');
            if (cumEl && echartsConfig.cumulative_return && echartsConfig.cumulative_return.series) {
                const cumChart = echarts.init(cumEl);
                cumChart.setOption({ tooltip: { trigger: 'axis' }, grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true }, ...echartsConfig.cumulative_return });
                window.addEventListener('resize', () => cumChart.resize());
            }
            if (ddEl && echartsConfig.drawdown && echartsConfig.drawdown.series) {
                const ddChart = echarts.init(ddEl);
                ddChart.setOption({ tooltip: { trigger: 'axis' }, grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true }, ...echartsConfig.drawdown });
                window.addEventListener('resize', () => ddChart.resize());
            }
        }

        function toggleCompactMode() {
            const container = document.getElementById('holdingsContainer');
            const text = document.getElementById('compactModeText');
            if (container.classList.contains('holdings-compact')) {
                container.classList.remove('holdings-compact');
                text.textContent = 'èˆ’é€‚æ¨¡å¼';
                localStorage.setItem('holdingsMode', 'comfortable');
            } else {
                container.classList.add('holdings-compact');
                text.textContent = 'ç´§å‡‘æ¨¡å¼';
                localStorage.setItem('holdingsMode', 'compact');
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('fundAgentLoggedIn') === 'true') {
                showPrivateData();
            } else {
                showPublicData();
            }
            initEchartsCharts();
            const mode = localStorage.getItem('holdingsMode');
            const container = document.getElementById('holdingsContainer');
            const text = document.getElementById('compactModeText');
            if (mode === 'comfortable' && container && text) {
                container.classList.remove('holdings-compact');
                text.textContent = 'èˆ’é€‚æ¨¡å¼';
            }
        });

        const tooltip = document.getElementById('tooltip');
        document.addEventListener('mousemove', e => {
            if (e.target.classList && e.target.classList.contains('glossary-term')) {
                tooltip.innerText = e.target.getAttribute('data-tip') || '';
                tooltip.style.display = 'block';
                let x = e.clientX + 10;
                if (x + 280 > window.innerWidth) x = e.clientX - 290;
                tooltip.style.left = x + 'px';
                tooltip.style.top = (e.clientY + 10) + 'px';
            } else {
                tooltip.style.display = 'none';
            }
        });
    </script>
</body>
</html>