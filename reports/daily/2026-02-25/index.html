<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CIO Dashboard | 2026-02-25 12:02:40</title>
    <meta name="theme-color" content="#121212">
    <link rel="stylesheet" href="modern-financial-theme.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        /* æ¯æ—¥å¯¹è´¦é¡µé¢ä¸“å± */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .metric-value { contain: layout style paint; }
        .sector-bar { height: 16px; display: flex; border-radius: 8px; overflow: hidden; margin: 10px 0; background: var(--bg-tertiary); }

        /* è¡¨æ ¼å®¹å™¨ */
        .table-scroll-wrapper {
            width: 100%; overflow-x: auto; margin: 20px 0; border-radius: 8px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
        }
        .table-scroll-wrapper.custom-scrollbar { -webkit-overflow-scrolling: touch; }
        .table-scroll-wrapper::-webkit-scrollbar { width: 6px; height: 6px; }
        .table-scroll-wrapper::-webkit-scrollbar-track { background: var(--bg-primary); border-radius: 4px; }
        .table-scroll-wrapper::-webkit-scrollbar-thumb { background: var(--bg-tertiary); border-radius: 4px; }
        .table-scroll-wrapper::-webkit-scrollbar-thumb:hover { background: var(--bg-elevated); }

        table { width: 100%; border-collapse: collapse; min-width: 650px; }
        th, td { padding: 14px 10px; text-align: left; border-bottom: 1px solid var(--border-color-light); white-space: nowrap; font-size: 14px; color: var(--text-primary); }
        th { background: var(--bg-tertiary); color: var(--accent-primary); font-size: 11px; text-transform: uppercase; }
        .text-right { text-align: right; }

        .ai-report h2 { font-size: 16px; color: var(--primary); margin: 35px 0 15px; border-left: 4px solid var(--primary); padding-left: 15px; }
        .ai-report ul { list-style: none; padding-left: 10px; }
        .ai-report li { margin-bottom: 12px; color: var(--text-muted); line-height: 1.8; position: relative; padding-left: 20px; font-size: 14px; }
        .ai-report li::before { content: "â€¢"; color: var(--primary); position: absolute; left: 0; font-weight: bold; }

        /* æ°”è±¡ç«™ */
        .weather-drawer {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            margin: 0; width: 100%;
        }
        .summary-bar { padding: 12px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; list-style: none; min-height: 44px; }
        .macro-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; padding: 0 20px 20px; }
        .macro-card {
            background: var(--bg-tertiary);
            padding: 12px; border-radius: 8px;
            border: 1px solid var(--border-color);
            border-left: 3px solid;
        }

        /* Login Modal */
        .modal { display: none; position: fixed; z-index: 11000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(4px); justify-content: center; align-items: center; }
        .modal.show { display: flex; }
        .modal-content {
            background: var(--bg-secondary);
            padding: 30px; border-radius: 8px; max-width: 400px; width: 90%;
            text-align: center; border: 1px solid var(--border-color);
            box-shadow: var(--shadow-xl);
        }
        .modal-content input {
            width: 80%; padding: 12px 16px; margin: 15px 0;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px; font-size: 16px; color: var(--text-primary);
            transition: all 0.2s ease;
        }
        .modal-content input:focus {
            border-color: var(--accent-primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }
        .modal-content input::placeholder { color: var(--text-tertiary); }
        .modal-content button {
            width: 85%; padding: 12px 24px;
            background: var(--accent-primary);
            border: none;
            border-radius: 8px; color: #fff; font-weight: 600; font-size: 16px; cursor: pointer;
            transition: all 0.2s ease;
        }
        .modal-content button:hover { background: var(--accent-primary-hover); transform: scale(1.02); }
        .modal-content button:active { transform: scale(0.98); }
        .signal-badge { display: none; }
        #loginStatus {
            position: fixed; top: 12px; right: 12px;
            background: var(--bg-secondary);
            padding: 10px 16px; border-radius: 8px;
            display: flex; align-items: center; gap: 10px; z-index: 10000; cursor: pointer;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-md);
            transition: all 0.2s ease; min-height: 44px; -webkit-tap-highlight-color: transparent;
        }
        #loginStatus:hover { background: var(--bg-tertiary); border-color: var(--accent-primary); }
        #loginStatus:active { transform: scale(0.96); opacity: 0.9; }

        /* --- ç§»åŠ¨ç«¯ä¼˜åŒ– --- */
        @media (max-width: 768px) {
            .container { padding: 16px; }
            .card { border-radius: 16px; padding: 16px; }
            .stat-grid { grid-template-columns: 1fr; gap: 16px; }
            .chart-row-2 { grid-template-columns: 1fr !important; }
            h1 { font-size: 28px; } h2 { font-size: 22px; } h3 { font-size: 18px; }
            body { font-size: 16px; }
            .table-scroll-wrapper .holdings-table { display: block; }
            .table-scroll-wrapper .holdings-table thead { display: none; }
            .table-scroll-wrapper .holdings-table tbody {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            .table-scroll-wrapper .holdings-table tbody tr.fund-card {
                display: flex;
                flex-direction: column;
                background: rgba(255, 255, 255, 0.4);
                border-radius: 12px;
                padding: 0.75rem;
                border: 1px solid rgba(255, 255, 255, 0.5);
                height: 140px;
                max-height: 140px;
                overflow: hidden;
            }
            .table-scroll-wrapper .holdings-table tbody td.fund-name-cell {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                padding: 0 0 0.4rem 0;
                border-bottom: 1px solid rgba(0,0,0,0.08);
            }
            .table-scroll-wrapper .holdings-table tbody td.signal-cell-desktop { display: none !important; }
            .table-scroll-wrapper .holdings-table tbody .signal-badge {
                display: inline-block !important;
                flex-shrink: 0;
                font-size: 11px;
                padding: 2px 6px;
                border-radius: 4px;
                background: rgba(74, 144, 226, 0.35);
                color: var(--accent-primary);
                font-weight: 600;
            }
            .table-scroll-wrapper .holdings-table tbody td:not(.fund-name-cell):not(.signal-cell-desktop) {
                display: flex;
                justify-content: space-between;
                padding: 0.35rem 0;
                border-bottom: 1px solid rgba(0,0,0,0.06);
                text-align: right;
                font-size: 13px;
            }
            .table-scroll-wrapper .holdings-table tbody td.fund-name-cell + td + td + td { border-bottom: none; }
            .table-scroll-wrapper .holdings-table tbody td::before {
                content: attr(data-label);
                font-weight: bold;
                text-align: left;
                margin-right: 0.5rem;
                color: var(--text-muted);
                font-size: 11px;
            }
        }
        @media (max-width: 600px) { .stat-grid { grid-template-columns: 1fr; } .container { padding: 15px; } }

        /* å¹³æ¿ç«¯ */
        @media (min-width: 769px) and (max-width: 1024px) { .stat-grid { gap: 20px; } }
    </style>
</head>
<body>
    <div id="loginStatus" onclick="handleStatusClick()">
        <span id="statusText"></span>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>ğŸ” æŸ¥çœ‹å®Œæ•´æ•°æ®</h2>
            <input type="password" id="passwordInput" placeholder="è¯·è¾“å…¥å¯†ç " onkeypress="if(event.key==='Enter') login()">
            <button onclick="login()">æˆæƒ</button>
            <p id="loginError" style="color:#f54343; margin-top:10px;"></p>
        </div>
    </div>
    <div id="tooltip" class="tooltip"></div>

    <nav class="nav-tabs tab-nav"><a href="index.html" class="nav-tab active">æ¯æ—¥å¯¹è´¦</a><a href="analysis.html" class="nav-tab">æ·±åº¦å½’å› </a><a href="history.html" class="nav-tab">å†å²å›æµ‹</a><a href="knowledge.html" class="nav-tab">æŠ•èµ„å­—å…¸</a><a href="screener.html" class="nav-tab">åŸºé‡‘ç­›é€‰</a></nav>

    <details class="weather-drawer">
        <summary class="summary-bar">
            <div style="font-weight:bold; color:#00c853">å®è§‚æ°”è±¡ç«™ï¼šæŒç»­é¡ºé£ (Score: 16.75)</div>
            <div style="font-size:12px; color:var(--text-secondary)">2026-02-25 12:02:40</div>
        </summary>
        <div class="macro-grid"><div class="macro-card" style="border-color:#00c853"><div style="font-size:10px;color:var(--text-tertiary)">US10Y</div><div style="font-weight:bold">4.03% ğŸŸ¢</div><div style="font-size:10px;color:var(--text-tertiary)">ä½äº4.2%æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#00c853"><div style="font-size:10px;color:var(--text-tertiary)">VIX</div><div style="font-weight:bold">19.5 ğŸŸ¢</div><div style="font-size:10px;color:var(--text-tertiary)">ä½äº20æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#00c853"><div style="font-size:10px;color:var(--text-tertiary)">DXY</div><div style="font-weight:bold">97.8 ğŸŸ¢</div><div style="font-size:10px;color:var(--text-tertiary)">ä½äº104æœ‰åˆ©</div></div><div class="macro-card" style="border-color:#00c853"><div style="font-size:10px;color:var(--text-tertiary)">CNH</div><div style="font-weight:bold">6.867 ğŸŸ¢</div><div style="font-size:10px;color:var(--text-tertiary)">ä½äº7.3æœ‰åˆ©</div></div></div>
    </details>

    <div class="container">
        <div class="card bento-item" style="margin-bottom:16px">
            <h3 style="margin-bottom:8px">æ¯æ—¥AIç®€è¯„</h3>
            <p style="font-size:14px; line-height:1.6; color:var(--text-primary); white-space:pre-wrap;">ã€å¸‚åœºæ€»ç»“ã€‘ç»„åˆå°å¹…ç›ˆåˆ©ï¼Œç¾å€ºæ”¶ç›Šç‡å›è½è‡³4.03%ï¼Œå¸‚åœºææ…Œæƒ…ç»ªï¼ˆVIX 19.5ï¼‰å¤„äºæ¸©å’Œæ°´å¹³ã€‚
ã€æ“ä½œå»ºè®®ã€‘å¯æŒä»“è§‚æœ›ï¼Œå…³æ³¨ç¾å€ºæ”¶ç›Šç‡ä¸VIXåç»­èµ°åŠ¿ï¼Œæš‚ä¸å®œå¤§å¹…åŠ ä»“ã€‚</p>
        </div>
        <div class="stat-grid">
            <div class="card">
                <div style="font-size:11px;color:var(--text-tertiary);letter-spacing:1px">7D ASSET TREND</div>
                <div id="trendChart" style="height:45px; width:100%"></div>
                <div id="mv_display" class="metric-value value-large" style="margin-top:10px; font-family:monospace"></div>
            </div>
            <div class="card">
                <div style="font-size:11px;color:var(--text-tertiary);letter-spacing:1px">PORTFOLIO MIX</div>
                <div class="sector-bar"><div style="width:34.45902680639009%; background:#4a90e2" title="Resource"></div><div style="width:27.939601962181758%; background:#5ba3f5" title="Pension"></div><div style="width:24.647451113041033%; background:#00c853" title="Dividend"></div><div style="width:12.953920118387115%; background:#ffa726" title="Tech"></div></div>
                <div style="display:flex; flex-wrap:wrap; gap:8px"><span style="color:#4a90e2; margin-right:10px; font-size:10px">â— Resource 34%</span><span style="color:#5ba3f5; margin-right:10px; font-size:10px">â— Pension 28%</span><span style="color:#00c853; margin-right:10px; font-size:10px">â— Dividend 25%</span><span style="color:#ffa726; margin-right:10px; font-size:10px">â— Tech 13%</span></div>
                <div id="pnl_display" class="metric-value value-large" style="margin-top:10px; font-family:monospace"></div>
            </div>
        </div>

        <div class="d-flex justify-between align-center mb-md" style="margin-top:20px">
            <h3>åŸºé‡‘æŒä»“</h3>
            <button class="btn btn-sm" onclick="toggleCompactMode()"><span id="compactModeText">ç´§å‡‘æ¨¡å¼</span></button>
        </div>
        <div id="holdingsContainer" class="table-scroll-wrapper custom-scrollbar holdings-compact">
            <table id="holdings_table" class="holdings-table"></table>
        </div>

        <div class="card" style="margin-top:20px">
            <div class="chart-row-2" style="display:grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                <div><div style="font-size:11px;letter-spacing:1px;margin-bottom:8px"><span class="glossary-term" data-tip="ä»æœŸåˆè‡³ä»Šçš„å¤åˆæ”¶ç›Šç™¾åˆ†æ¯”ï¼Œåæ˜ é•¿æœŸæŠ•èµ„è¡¨ç°ã€‚">ç´¯è®¡æ”¶ç›Šç‡</span></div><div id="cumulative_return_chart" style="width:100%; height:220px;"></div></div>
                <div><div style="font-size:11px;letter-spacing:1px;margin-bottom:8px"><span class="glossary-term" data-tip="å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œè¡¡é‡æœ€å¤§äºæŸå¹…åº¦ã€‚">å†å²å›æ’¤</span></div><div id="drawdown_chart" style="width:100%; height:220px;"></div></div>
            </div>
        </div>

        <div class="ai-report" id="ai-report"></div>
    </div>

    <!-- æ—¥æŠ¥ï¼šé’ˆå¯¹æŠ¥å‘Šæé—®å¸åº•æ¡†ï¼ˆä¸å…³è”æ¿å—ï¼‰ -->
    <div id="daily-chat-bar" style="position:fixed;bottom:0;left:0;right:0;z-index:9998;background:var(--bg-secondary);border-top:1px solid var(--border-color);padding:10px 16px;display:flex;gap:10px;align-items:center;box-shadow:0 -4px 12px rgba(0,0,0,0.2);">
        <input type="text" id="daily-chat-input" placeholder="é’ˆå¯¹æŠ¥å‘Šæé—®â€¦" style="flex:1;max-width:400px;padding:10px 14px;border-radius:8px;border:1px solid var(--border-color);background:var(--bg-tertiary);color:var(--text-primary);font-size:14px;">
        <button id="daily-chat-send" style="padding:10px 20px;border-radius:8px;background:var(--accent-primary);color:#fff;border:none;font-weight:600;cursor:pointer;">å‘é€</button>
        <div id="daily-chat-reply" style="display:none;position:absolute;bottom:100%;left:16px;right:16px;margin-bottom:8px;padding:12px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:8px;font-size:13px;line-height:1.5;max-height:200px;overflow-y:auto;box-shadow:var(--shadow-lg);"></div>
    </div>
    <script>window.REPORT_CONTEXT = {"current_mv": 22739.877281, "daily_pnl": 352.11, "daily_return_pct": 1.55, "weather": "æŒç»­é¡ºé£", "sectors": ["Dividend", "Tech", "Resource", "Pension"]};</script>
    <script>
        (function initDailyChat() {
            var bar = document.getElementById('daily-chat-bar');
            var input = document.getElementById('daily-chat-input');
            var send = document.getElementById('daily-chat-send');
            var reply = document.getElementById('daily-chat-reply');
            var CHAT_API_URL = "https://my-fund-api.liuyuyin19950805.workers.dev";
            var API_BASE = CHAT_API_URL || (window.location.protocol === 'file:' ? 'http://127.0.0.1:8000' : (window.location.origin.replace(/:\d+$/, '') + ':8000'));
            send.addEventListener('click', function() {
                var q = (input.value || '').trim();
                if (!q) return;
                input.value = '';
                reply.style.display = 'block';
                reply.textContent = 'æ€è€ƒä¸­â€¦';
                fetch(API_BASE + '/chat', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ question: q, context_data: window.REPORT_CONTEXT || { } }) })
                    .then(function(r) { return r.json(); })
                    .then(function(d) { reply.textContent = d.answer || 'æ— å›å¤'; })
                    .catch(function(e) { reply.textContent = 'è¯·æ±‚å¤±è´¥ï¼šè¯·å…ˆè¿è¡Œ python main.py å¯åŠ¨ APIï¼›è‹¥ç”¨ file:// æ‰“å¼€è¯·ç”¨æœ¬åœ°æœåŠ¡å™¨æ‰“å¼€é¡µé¢'; });
            });
            input.addEventListener('keydown', function(e) { if (e.key === 'Enter') { e.preventDefault(); send.click(); } });
        })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        const privateData = {"mv_display": "Â¥22,739.88", "pnl_display": "Â¥+352.11", "pnl_color": "var(--up)", "funds": [{"name": "åˆ›é‡‘åˆä¿¡ä¸­è¯çº¢åˆ©ä½æ³¢æŒ‡æ•°C", "mode": "ä¼°å€¼", "mv": "Â¥3,520", "rate": 0.66, "pnl": "Â¥+23.23", "cum": 4.3730345911949575, "grid": "-", "acc": "A"}, {"name": "å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)A", "mode": "ä¼°å€¼", "mv": "Â¥1,400", "rate": 1.03, "pnl": "Â¥+14.42", "cum": -0.024967542195153403, "grid": "-", "acc": "A"}, {"name": "å¯Œå›½æ²ªæ·±300å¢å¼ºA", "mode": "ä¼°å€¼", "mv": "Â¥2,085", "rate": 1.24, "pnl": "Â¥+25.86", "cum": 12.441287661816936, "grid": "-", "acc": "A"}, {"name": "å˜‰å®ä¸Šæµ·é‡‘ETFè”æ¥C", "mode": "å®æ—¶", "mv": "Â¥3,219", "rate": 0.4868342252187796, "pnl": "Â¥+15.67", "cum": 8.0237536251899, "grid": "-", "acc": "A"}, {"name": "ä¸œæ–¹çº¢é¢å’Œç§¯æå…»è€äº”å¹´(FOF)Y", "mode": "ä¼°å€¼", "mv": "Â¥3,154", "rate": 0.52, "pnl": "Â¥+16.40", "cum": 5.149396058486966, "grid": "-", "acc": "B"}, {"name": "å¹¿å‘å…»è€2050äº”å¹´æŒæœ‰æœŸæ··åˆ(FOF)Y", "mode": "ä¼°å€¼", "mv": "Â¥3,199", "rate": 1.27, "pnl": "Â¥+40.63", "cum": 6.635311143270628, "grid": "-", "acc": "B"}, {"name": "åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A", "mode": "ä¼°å€¼", "mv": "Â¥4,617", "rate": 4.69, "pnl": "Â¥+216.52", "cum": 10.506284741349091, "grid": "<span style='color:#f54343;font-weight:bold'>[SELL]</span>", "acc": "A"}, {"name": "åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C", "mode": "ä¼°å€¼", "mv": "Â¥1,546", "rate": -0.04, "pnl": "Â¥-0.62", "cum": -3.8528080915624097, "grid": "-", "acc": "A"}], "t_values": [16800.0, 16850.0, 16834.8, 16832.63]};
        const publicData = {"mv_display": "å·²éšè—", "pnl_display": "+1.55%", "pnl_color": "var(--up)", "funds": [{"name": "åˆ›é‡‘åˆä¿¡ä¸­è¯çº¢åˆ©ä½æ³¢æŒ‡æ•°C", "mode": "ä¼°å€¼", "weight": "15.5%", "rate": 0.66, "cum": 4.3730345911949575, "grid": "-", "acc": "A"}, {"name": "å—æ–¹çº³æ–¯è¾¾å…‹100æŒ‡æ•°(QDII)A", "mode": "ä¼°å€¼", "weight": "6.2%", "rate": 1.03, "cum": -0.024967542195153403, "grid": "-", "acc": "A"}, {"name": "å¯Œå›½æ²ªæ·±300å¢å¼ºA", "mode": "ä¼°å€¼", "weight": "9.2%", "rate": 1.24, "cum": 12.441287661816936, "grid": "-", "acc": "A"}, {"name": "å˜‰å®ä¸Šæµ·é‡‘ETFè”æ¥C", "mode": "å®æ—¶", "weight": "14.2%", "rate": 0.4868342252187796, "cum": 8.0237536251899, "grid": "-", "acc": "A"}, {"name": "ä¸œæ–¹çº¢é¢å’Œç§¯æå…»è€äº”å¹´(FOF)Y", "mode": "ä¼°å€¼", "weight": "13.9%", "rate": 0.52, "cum": 5.149396058486966, "grid": "-", "acc": "B"}, {"name": "å¹¿å‘å…»è€2050äº”å¹´æŒæœ‰æœŸæ··åˆ(FOF)Y", "mode": "ä¼°å€¼", "weight": "14.1%", "rate": 1.27, "cum": 6.635311143270628, "grid": "-", "acc": "B"}, {"name": "åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A", "mode": "ä¼°å€¼", "weight": "20.3%", "rate": 4.69, "cum": 10.506284741349091, "grid": "<span style='color:#f54343;font-weight:bold'>[SELL]</span>", "acc": "A"}, {"name": "åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C", "mode": "ä¼°å€¼", "weight": "6.8%", "rate": -0.04, "cum": -3.8528080915624097, "grid": "-", "acc": "A"}], "t_values": [0.0, 0.29761904761904656, 0.2071428571428502, 0.19422619047619882]};
        const aiReport = "## 1. ç›ˆäºçœŸç›¸ (Who made/lost money)\n* ä»Šæ—¥æ•´ä½“ç›ˆåˆ©ï¼ˆ+1.55%ï¼‰ä¸»è¦ç”±**åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A**ï¼ˆ+4.69%ï¼‰é©±åŠ¨ï¼Œå…¶è´¡çŒ®è¿œè¶…å…¶ä»–æŒä»“ï¼Œæˆä¸ºç»å¯¹åŠŸè‡£ã€‚**åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C**ï¼ˆ-0.04%ï¼‰æ˜¯å”¯ä¸€äºæŸé¡¹ï¼Œä½†å½±å“å¾®ä¹å…¶å¾®ã€‚\n* è´¦æˆ·Aï¼ˆä¸»åŠ¨ç­–ç•¥ï¼‰æ•´ä½“è¡¨ç°å¼ºåŠ²ï¼Œé™¤äººå·¥æ™ºèƒ½å¤–å‡å½•å¾—æ­£æ”¶ç›Šï¼Œç¬¦åˆå…¶æ•æ‰è¡Œä¸šè´å¡”åŠé˜¿å°”æ³•çš„å®šä½ã€‚è´¦æˆ·Bï¼ˆå…»è€é˜²å¾¡ï¼‰ä¸­ä¸¤åªFOFæ”¶ç›Šç¨³å¥ï¼ˆ+0.52%ï¼Œ +1.27%ï¼‰ï¼Œè¡¨ç°ä¸å¸‚åœºåŒæ­¥ï¼Œç¬¦åˆå…¶å¹³æ»‘æ³¢åŠ¨çš„é˜²å¾¡é¢„æœŸã€‚ä»Šæ—¥åšå¼ˆè¡¨ç°ä¸ºâ€œAæ”»Bå®ˆâ€ï¼Œç¬¦åˆé¢„æœŸã€‚\n\n## 2. å¤§ç¯å¢ƒä¼ å¯¼å®¡è®¡ (Macro Push & Pull)\n* **ç¾å€ºæ”¶ç›Šç‡(US10Y)ä¸­æ€§ã€ç¾å…ƒæŒ‡æ•°(DXY)ä¸­æ€§**ï¼šæœªå¯¹å…¨çƒæˆé•¿è‚¡ï¼ˆå¦‚çº³æ–¯è¾¾å…‹100ï¼‰æ„æˆæ˜¾è‘—å‹åˆ¶ï¼Œä½¿å…¶è·å¾—æ¸©å’Œä¸Šæ¶¨ï¼ˆ+1.03%ï¼‰ã€‚**ææ…ŒæŒ‡æ•°(VIX)ä¸­æ€§**ï¼Œè¡¨æ˜å¸‚åœºæƒ…ç»ªç¨³å®šï¼Œä¸ºAè‚¡ï¼ˆæ²ªæ·±300å¢å¼º+1.24%ï¼‰æä¾›äº†å¹³ç¨³ç¯å¢ƒã€‚\n* **åŒ—å‘èµ„é‡‘å¤§å¹…å‡€æµå‡º**ï¼šæ„æˆAè‚¡å¸‚åœºçš„æ˜ç¡®é€†é£ï¼Œä½†ç»„åˆå†…Aè‚¡ç›¸å…³æŒä»“ï¼ˆçº¢åˆ©ä½æ³¢ã€æ²ªæ·±300å¢å¼ºã€æœ‰è‰²é‡‘å±ï¼‰å‡å®ç°æ­£æ”¶ç›Šï¼Œå°¤å…¶æ˜¯**æœ‰è‰²é‡‘å±**å¤§å¹…é¢†æ¶¨ã€‚è¿™è¡¨æ˜ç»„åˆä»Šæ—¥è¡¨ç°ï¼ˆ+1.55%ï¼‰æ˜¾è‘—è¶…è¶Šå¸‚åœºæ•´ä½“è´å¡”ï¼ˆå—å¤–èµ„æµå‡ºæ‹–ç´¯ï¼‰ï¼Œä¸»è¦**é˜¿å°”æ³•**æ¥æºäºæˆåŠŸæ•æ‰äº†**æœ‰è‰²é‡‘å±**è¡Œä¸šçš„ç‹¬ç«‹å¼ºåŠ¿è¡Œæƒ…ï¼ŒæŠµæ¶ˆäº†å®è§‚é€†é£ã€‚\n\n## 3. ç»„åˆçŠ¶å†µåˆ†æ (Health Check)\n* ä»Šæ—¥ç»„åˆæ³¢åŠ¨ä¸»è¦ç”±å•ä¸€è¡Œä¸šåŸºé‡‘ï¼ˆæœ‰è‰²é‡‘å±ï¼‰é©±åŠ¨ï¼Œå±ä¸»åŠ¨é£é™©æš´éœ²ã€‚é‰´äºå…¶å¸¦æ¥æ˜¾è‘—æ­£æ”¶ç›Šï¼Œä¸”å…¶ä½™æŒä»“æ³¢åŠ¨æ¸©å’Œï¼Œä»Šæ—¥ç»„åˆæ•´ä½“æ³¢åŠ¨åœ¨æ‰¿å—èŒƒå›´å†…ã€‚\n* å¯¹æ¯”å†å²æœ€å¤§å›æ’¤é˜ˆå€¼ï¼Œå½“å‰ç»„åˆå¥åº·è´¨é‡**è‰¯å¥½**ã€‚ä¸»è¦é£é™©ç‚¹åœ¨äº**æœ‰è‰²é‡‘å±**ä»“ä½å› çŸ­æœŸæ¶¨å¹…è¾ƒå¤§å¯èƒ½é¢ä¸´å›è°ƒå‹åŠ›ï¼Œä½†æœªè§¦å‘æ•´ä½“å›æ’¤é£æ§çº¿ã€‚è´¦æˆ·Bçš„é˜²å¾¡æ€§ä»“ä½æœ‰æ•ˆå¯¹å†²äº†éƒ¨åˆ†æ½œåœ¨æ³¢åŠ¨ã€‚\n\n## 4. æˆ˜æœ¯è°ƒä»“æŒ‡ä»¤ (Tactical Orders)\n* **å†å¹³è¡¡**ï¼šé‰´äº**åå¤ä¸­è¯æœ‰è‰²é‡‘å±ETFè”æ¥A**çŸ­æœŸæ¶¨å¹…å·¨å¤§ï¼Œå·²åç¦»åˆå§‹é…ç½®æƒé‡ï¼Œæ„æˆè¶…é…ã€‚æŒ‡ä»¤ä¸º**éƒ¨åˆ†æ­¢ç›ˆ**ï¼Œå‡æŒè¯¥å¤´å¯¸çš„20%-30%ï¼Œé”å®šåˆ©æ¶¦ï¼Œå°†èµ„é‡‘å†å¹³è¡¡è‡³ä½é…æˆ–è´Ÿæ”¶ç›Šèµ„äº§ã€‚\n* **åŠ å‡ä»“**ï¼š\n    * **å‡ä»“**ï¼šæŒ‰ä¸Šè¿°æŒ‡ä»¤æ‰§è¡Œå¯¹æœ‰è‰²é‡‘å±çš„å‡ä»“ã€‚\n    * **åŠ ä»“/è§‚å¯Ÿ**ï¼šå°†å‡æŒæ‰€å¾—èµ„é‡‘æš‚æ—¶åˆ’å…¥ç°é‡‘ç­‰ä»·ç‰©ã€‚**åå¤äººå·¥æ™ºèƒ½ETCè”æ¥C**ä»Šæ—¥å¾®è·Œï¼Œå¯è§‚å¯Ÿå…¶æ˜¯å¦è¿›å…¥[GRID]ç½‘æ ¼ä¹°å…¥åŒºé—´ï¼Œè‹¥è§¦åŠåˆ™è¿›è¡Œå°é¢å®šæŠ•æ‘Šè–„æˆæœ¬ï¼›å¦åˆ™ç»´æŒç°æœ‰ä»“ä½ï¼Œæš‚ä¸åŠ ä»“ã€‚\n    * **ç»´æŒ**ï¼šå…¶ä½™æŒä»“æ¯”ä¾‹æš‚æ— æ˜¾è‘—å¤±è¡¡ï¼Œä¸”è¿è¡Œç¬¦åˆå„è‡ªç­–ç•¥ç›®æ ‡ï¼ŒæŒ‡ä»¤ä¸º**ç»´æŒç°çŠ¶**ï¼Œç»§ç»­è§‚å¯Ÿã€‚";
        const PASSWORD_HASH = "608f4a69d48963560e8c0fcb2f6da1a51e87b117dcf1b3054038f7cbd8660def";

        const GLOSSARY = {"ETF": "ETFæ˜¯æ‰“åŒ…ä¸€ç¯®å­èµ„äº§çš„äº¤æ˜“æ‰€äº¤æ˜“åŸºé‡‘ï¼Œåƒä¸€ç›’ç²¾é€‰å·§å…‹åŠ›è®©ä½ ä¸€æ¬¡å°éå¤šç§å£å‘³ã€‚", "FOF": "FOFæ˜¯æŠ•èµ„äºå…¶ä»–åŸºé‡‘çš„åŸºé‡‘ï¼Œå¸®ä½ ä¸€é”®ä¹°å…¥ä¸€ç¯®å­åŸºé‡‘ç»„åˆã€‚å®ƒå°±åƒåŸºé‡‘ä¸–ç•Œçš„ä¸“ä¸šä¹°æ‰‹ï¼Œæ›¿ä½ ç²¾é€‰å¹¶æ­é…å¤šä¸ªåŸºé‡‘æ„å»ºæŠ•èµ„èœå•ã€‚", "æˆ˜æœ¯è°ƒä»“": "æˆ˜æœ¯è°ƒä»“æ˜¯æŠ•èµ„è€…æ ¹æ®çŸ­æœŸå¸‚åœºé¢„æµ‹è°ƒæ•´æŒä»“ä»¥å¢å¼ºå›æŠ¥æˆ–æ§åˆ¶é£é™©çš„è¡Œä¸ºï¼Œè¿™å°±åƒèˆ¹é•¿æ ¹æ®å®æ—¶é£æµªå¾®è°ƒèˆªå‘ï¼Œè€Œéå›ºå®ˆåŸå®šèˆªçº¿ã€‚", "Alpha": "Alphaæ˜¯æŠ•èµ„ç»„åˆè¶…è¶ŠåŸºå‡†å›æŠ¥çš„è¶…é¢æ”¶ç›Šã€‚å®ƒå¥½æ¯”èµ›è½¦ä¸­è½¦æ‰‹å‡­å€ŸæŠ€æœ¯è€Œéå¿«è½¦å–å¾—çš„é¢å¤–ä¼˜åŠ¿ã€‚", "CIO": "é¦–å¸­æŠ•èµ„å®˜æ˜¯å…¬å¸æŠ•èµ„å†³ç­–çš„æœ€ç»ˆè´Ÿè´£äººï¼Œå¦‚åŒèˆ¹é•¿åœ¨é‡‘èå¸‚åœºä¸­ä¸ºæŠ•èµ„ç»„åˆæŒèˆµå¯¼èˆªã€‚", "GPU": "GPUæ˜¯é©±åŠ¨äººå·¥æ™ºèƒ½å’Œå¤æ‚å›¾å½¢ä»»åŠ¡çš„æ ¸å¿ƒå¤„ç†å™¨ã€‚å®ƒå°±åƒé‡‘èå¸‚åœºçš„åšå¸‚å•†ï¼ŒåŒæ—¶å¤„ç†æµ·é‡äº¤æ˜“æŒ‡ä»¤ï¼Œç¡®ä¿é«˜æ•ˆæ‰§è¡Œã€‚", "TOP": "TOPæ˜¯è¿½è¸ªå°æ¹¾è‚¡å¸‚è¡¨ç°çš„åŸºå‡†æŒ‡æ•°ï¼Œå¦‚åŒç¾è‚¡æŠ•èµ„è€…è§‚å¯Ÿæ ‡æ™®500æ¥æŠŠæ¡å¸‚åœºè„‰æã€‚", "å‹èˆ±çŸ³": "å‹èˆ±çŸ³æ˜¯æŠ•èµ„ç»„åˆä¸­ç”¨äºæŠµå¾¡å¸‚åœºæ³¢åŠ¨çš„ç¨³å¥èµ„äº§ï¼Œå®ƒå¦‚åŒè¿œæ´‹è´§è½®çš„å‹èˆ±çŸ³ï¼Œåœ¨é£æµªä¸­ç»´æŒèˆ¹èº«ç¨³å®šã€‚", "å› å­æ•æ„Ÿåº¦": "å› å­æ•æ„Ÿåº¦è¡¡é‡æŠ•èµ„ç»„åˆå¯¹ç‰¹å®šé£é™©å› å­çš„æš´éœ²ç¨‹åº¦ï¼Œå°±åƒä½“æ£€æŠ¥å‘Šæ˜¾ç¤ºä½ å¯¹ä¸åŒè¿‡æ•åŸçš„ååº”å¼ºåº¦ã€‚", "å¤æ™®": "å¤æ™®æ¯”ç‡è¡¡é‡æ¯æ‰¿æ‹…ä¸€å•ä½é£é™©æ‰€è·å¾—çš„è¶…é¢å›æŠ¥ã€‚å°±åƒè¡¡é‡ä¸€è¾†è½¦çš„ç‡ƒæ²¹æ•ˆç‡ï¼Œå®ƒå‘Šè¯‰ä½ æ¯æ¶ˆè€—ä¸€å‡æ²¹èƒ½è·‘å¤šè¿œã€‚", "æŠ±å›¢": "æŠ±å›¢æ˜¯æŠ•èµ„è€…é›†ä¸­ä¹°å…¥å°‘æ•°çƒ­é—¨èµ„äº§å¯¼è‡´å…¶ä»·æ ¼è„±ç¦»åŸºæœ¬é¢çš„ç¾¤ä½“è¡Œä¸ºï¼›è¿™å°±åƒç²‰ä¸æŠ¢è´­æ¼”å”±ä¼šé—¨ç¥¨ï¼Œæ— å…³æ­Œæ‰‹å®åŠ›è€Œçº¯ç²¹å› ä¸ºå®³æ€•é”™è¿‡ã€‚", "èµ„äº§é…ç½®": "èµ„äº§é…ç½®æ˜¯å†³å®šæŠ•èµ„ç»„åˆä¸­å„ç±»èµ„äº§æ¯”ä¾‹çš„è¿‡ç¨‹ï¼Œå¦‚åŒè§„åˆ’ä¸€åœºæ™šå®´çš„èœå•ï¼Œä½ éœ€è¦å¹³è¡¡è¥å…»ã€å£å‘³ä¸é£é™©ï¼Œç¡®ä¿æ— è®ºä¸»èœæ˜¯å¦åˆèƒƒå£ï¼Œæ²™æ‹‰å’Œç”œç‚¹éƒ½èƒ½ç¨³å®šæ•´ä½“ä½“éªŒã€‚", "è¶…é¢æ”¶ç›Š": "è¶…é¢æ”¶ç›Šæ˜¯æŠ•èµ„ç»„åˆå›æŠ¥è¶…è¿‡åŸºå‡†å›æŠ¥çš„éƒ¨åˆ†ï¼Œå¦‚åŒèµ›è½¦æ‰‹åœ¨æ ‡å‡†åœˆé€Ÿä¸Šé¢å¤–äº‰å–åˆ°çš„é¢†å…ˆä¼˜åŠ¿ã€‚", "AI": "AIæ˜¯è®©æœºå™¨æ¨¡æ‹Ÿäººç±»æ™ºèƒ½çš„æŠ€æœ¯ï¼Œå®ƒåƒä¸€ä½ä¸çŸ¥ç–²å€¦çš„åˆ†æå¸ˆï¼Œèƒ½ç¬é—´å¤„ç†æµ·é‡æ•°æ®å¹¶ç»™å‡ºæ´å¯Ÿã€‚", "ç°çŠ€ç‰›": "ç°çŠ€ç‰›æŒ‡é‚£äº›æ¦‚ç‡æé«˜ã€å†²å‡»å·¨å¤§çš„æ½œåœ¨å±æœºï¼Œå®ƒå°±åƒè¿œå¤„å°˜åœŸé£æ‰¬ä¸­ä¸€å¤´ç¼“ç¼“å†²æ¥çš„çŠ€ç‰›ï¼Œäººä»¬å¾€å¾€å› å®ƒè¡ŒåŠ¨çœ‹ä¼¼ç¼“æ…¢è€Œå¿½è§†ï¼Œç›´åˆ°è¢«æ’å€’æ‰åæ‚”è«åŠã€‚", "é£æ ¼æ¼‚ç§»": "é£æ ¼æ¼‚ç§»æ˜¯åŸºé‡‘ç»ç†åç¦»å…¶å®£ç§°çš„æŠ•èµ„ç­–ç•¥ï¼Œå°±åƒæ‰¿è¯ºåªåšå·èœçš„å¨å¸ˆå¼€å§‹å·å·åŠ å…¥æ³•é¤å…ƒç´ ã€‚", "æ­¢ç›ˆ": "æ­¢ç›ˆæ˜¯è®¾å®šä¸€ä¸ªç›®æ ‡ä»·ä½å¹¶åœ¨è¾¾åˆ°æ—¶å–å‡ºä»¥é”å®šåˆ©æ¶¦çš„äº¤æ˜“ç­–ç•¥ï¼›è¿™å°±åƒåœ¨æ´¾å¯¹é«˜æ½®æ—¶ç¦»åœºï¼Œç¡®ä¿ä½ å¸¦ç€ç¾å¥½å›å¿†è€Œéä¸€ç‰‡ç‹¼è—‰å›å®¶ã€‚", "CNH": "CNHæ˜¯ç¦»å²¸å¸‚åœºäº¤æ˜“çš„äººæ°‘å¸ï¼Œæ±‡ç‡ç”±å›½é™…å¸‚åœºä¾›éœ€å†³å®šï¼›å®ƒå°±åƒäººæ°‘å¸çš„æµ·å¤–åˆ†èº«ï¼Œä»·æ ¼æ›´è‡ªç”±åœ°éšå…¨çƒæŠ•èµ„è€…æƒ…ç»ªæ³¢åŠ¨ã€‚", "QDII": "QDIIæ˜¯åˆæ ¼å¢ƒå†…æœºæ„æŠ•èµ„è€…ï¼Œå…è®¸ä¸­å›½å†…åœ°å±…æ°‘é€šè¿‡æœ¬åœ°åŸºé‡‘æŠ•èµ„æµ·å¤–å¸‚åœºã€‚è¿™å°±åƒç»™ä½ çš„èµ„é‡‘ä¸€æœ¬å›½é™…æŠ¤ç…§ï¼Œå¯ä»¥å‡ºå¢ƒåœ¨å…¨çƒèŒƒå›´å†…å¯»æ‰¾å¢é•¿æœºä¼šã€‚", "æ­¢æŸ": "æ­¢æŸæ˜¯å½“æŠ•èµ„äºæŸè¾¾åˆ°é¢„å®šå¹…åº¦æ—¶åŠæ—¶å–å‡ºä»¥é¿å…æ›´å¤§æŸå¤±çš„çºªå¾‹æ€§æ“ä½œï¼›å¦‚åŒæ±½è½¦å®‰å…¨å¸¦ï¼Œæœªå¿…å¸¸ç”¨ä½†èƒ½åœ¨æ„å¤–æ—¶é™åˆ¶ä¼¤å®³ä¿æŠ¤æœ¬é‡‘ã€‚", "GRID": "GRIDæ˜¯ä¸€ç§åŸºäºä»·æ ¼åŒºé—´è‡ªåŠ¨ä½ä¹°é«˜å–çš„äº¤æ˜“ç­–ç•¥ï¼›å®ƒå°±åƒåœ¨éœ‡è¡å¸‚é‡Œè®¾ç½®ä¸€å¼ æ¸”ç½‘ï¼Œä»·æ ¼æ³¢åŠ¨æ—¶ä¼šè‡ªåŠ¨æ•æ‰å…¶ä¸­çš„å·®ä»·åˆ©æ¶¦ã€‚", "US10Y": "ç¾å€º10Yæ”¶ç›Šç‡ã€‚å…¨çƒèµ„äº§å®šä»·ä¹‹é”šï¼Œåæ˜ å¸‚åœºå¯¹é•¿æœŸé€šèƒ€ä¸æ— é£é™©åˆ©ç‡çš„é¢„æœŸã€‚", "DXY": "ç¾å…ƒæŒ‡æ•°ã€‚è¡¡é‡ç¾å…ƒå¯¹ä¸€ç¯®å­è´§å¸çš„å¼ºåº¦ï¼Œå…¶èµ°å¼ºé€šå¸¸å¯¹æ–°å…´å¸‚åœºæµåŠ¨æ€§æ„æˆå‹åŠ›ã€‚", "VIX": "æ³¢åŠ¨ç‡æŒ‡æ•°ï¼ˆææ…ŒæŒ‡æ•°ï¼‰ã€‚è¡¡é‡æ ‡æ™®500æœŸæƒè•´å«çš„éšå«æ³¢åŠ¨ç‡ï¼Œæ•°å€¼é«˜ä¼åæ˜ é¿é™©æƒ…ç»ªæµ“åšã€‚", "YTD": "ä»Šå¹´ä»¥æ¥ï¼ˆYear to Dateï¼‰ã€‚ä»å¹´åˆè‡³ä»Šçš„ç´¯è®¡æ”¶ç›Šæˆ–æŒ‡æ ‡ï¼Œç”¨äºè·¨å‘¨æœŸæ¯”è¾ƒã€‚", "å›æ’¤": "æœ€å¤§å›æ’¤ï¼ˆMDDï¼‰ã€‚èµ„äº§å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œæ˜¯è¯„ä¼°é£é™©æ§åˆ¶èƒ½åŠ›çš„å…³é”®æŒ‡æ ‡ã€‚", "å†å²å›æ’¤": "å‡€å€¼ä»å†å²é«˜ç‚¹å›è½çš„ç™¾åˆ†æ¯”ï¼Œè¡¡é‡æœ€å¤§äºæŸå¹…åº¦ã€‚", "ç´¯è®¡æ”¶ç›Šç‡": "ä»æœŸåˆè‡³ä»Šçš„å¤åˆæ”¶ç›Šç™¾åˆ†æ¯”ï¼Œåæ˜ é•¿æœŸæŠ•èµ„è¡¨ç°ã€‚", "é˜¿å°”æ³•": "è¶…é¢æ”¶ç›Šï¼ˆAlphaï¼‰ã€‚ç‹¬ç«‹äºå¸‚åœºæ³¢åŠ¨ä¹‹å¤–çš„è·åˆ©èƒ½åŠ›ï¼Œä½“ç°ä¸»åŠ¨ç®¡ç†çš„é€‰è‚¡æº¢ä»·ã€‚", "è´å¡”": "ç³»ç»Ÿæ€§æ”¶ç›Šï¼ˆBetaï¼‰ã€‚ä¸å¤§ç›˜æ³¢åŠ¨ç›¸å…³çš„æ”¶ç›Šéƒ¨åˆ†ï¼Œåæ˜ ç»„åˆå¯¹å¸‚åœºæ•´ä½“é£é™©çš„æš´éœ²ç¨‹åº¦ã€‚", "æ³¢åŠ¨ç‡": "æ”¶ç›Šç‡ç¦»æ•£ç¨‹åº¦ã€‚é‡åŒ–èµ„äº§ä»·æ ¼æ³¢åŠ¨çš„å‰§çƒˆç¨‹åº¦ï¼Œæ˜¯ç°ä»£æŠ•èµ„ç»„åˆé£é™©å®šä»·çš„æ ¸å¿ƒã€‚", "å†å¹³è¡¡": "èµ„äº§æƒé‡çº åã€‚é€šè¿‡å‡æŒè¶…é…èµ„äº§ã€å¢æŒä½é…èµ„äº§ï¼Œå¼ºåˆ¶ä½¿ç»„åˆå›å½’ç›®æ ‡é£é™©æ°´å¹³ã€‚", "åŸºå‡†": "ä¸šç»©æ¯”è¾ƒåŸºå‡†ï¼ˆBenchmarkï¼‰ã€‚å®¢è§‚è¯„ä»·ç»„åˆè·åˆ©èƒ½åŠ›æ˜¯å¦è¾¾æ ‡çš„å‚ç…§ç³»ã€‚", "å¤æ™®æ¯”ç‡": "é£é™©è°ƒæ•´åçš„æ”¶ç›Šæ•ˆç‡ï¼Œé«˜å¤æ™®å³æ”¶ç›Šæ‹¿å¾—ç›¸å¯¹å®‰ç¨³ã€‚", "æœ€å¤§å›æ’¤": "ç‰¹å®šæ—¶é—´å†…ä»å·…å³°åˆ°è°·åº•çš„æœ€æƒ¨è·Œå¹…ï¼Œå®šä¹‰ç—›è‹¦é˜ˆå€¼ä¸é£é™©åº•çº¿ã€‚", "åŒºé—´æ”¶ç›Šç‡": "é€‰å®šåŒºé—´å†…ï¼Œæ‰£é™¤å¢æŠ•/èµå›åçš„æŠ•èµ„å›æŠ¥ç‡ã€‚", "å¹´åŒ–æ”¶ç›Šç‡": "å°†åŒºé—´æ”¶ç›Šç‡æŒ‰å¹´åŒ–æŠ˜ç®—ï¼Œä¾¿äºè·¨å‘¨æœŸæ¯”è¾ƒã€‚", "èƒœç‡": "ç›ˆåˆ©äº¤æ˜“æ—¥å æ¯”ï¼Œå¦‚ 60% è¡¨ç¤º 10 å¤©ä¸­æœ‰ 6 å¤©èµšé’±ã€‚", "ç›ˆäºæ¯”": "å¹³å‡ç›ˆåˆ©æ—¥æ”¶ç›Š Ã· å¹³å‡äºæŸæ—¥æ”¶ç›Šï¼Œè¡¡é‡ç›ˆäºä¸å¯¹ç§°æ€§ã€‚", "çœŸå®æ”¶ç›Š": "(æœŸæœ«å¸‚å€¼ - æœŸåˆå¸‚å€¼) - å‡€æµå…¥ï¼Œæ’é™¤å¢æŠ•/èµå›åçš„çº¯æŠ•èµ„å›æŠ¥ã€‚", "å‡€æµå…¥": "æœŸé—´ä¹°å…¥æ€»é¢ - å–å‡ºæ€»é¢ï¼Œæ­£æ•°è¡¨ç¤ºå‡€æŠ•å…¥èµ„é‡‘ã€‚", "è¡Œä¸šçƒ­åº¦": "æ ¹æ®å¸‚åœºèµ„é‡‘æµå‘ä¸è¡Œä¸šè½®åŠ¨ï¼Œé‡åŒ–å„è¡Œä¸šå½“å‰çƒ­åº¦ï¼Œç”¨äºè¾…åŠ©æ‹©æ—¶ä¸è¡Œä¸šé…ç½®ã€‚", "ç»¼åˆåˆ†": "ç»¼åˆè¯„åˆ†ï¼Œç»“åˆè¡Œä¸šçƒ­åº¦ã€å†å²è¡¨ç°ç­‰ç»´åº¦çš„é‡åŒ–å¾—åˆ†ï¼Œç”¨äºæ’åºç­›é€‰ã€‚"};
        const sortedTerms = Object.keys(GLOSSARY).sort((a, b) => b.length - a.length);
        function walkAndReplace(node) {
            if (node.nodeType === 3) {
                let text = node.data;
                let hasChange = false;
                sortedTerms.forEach(term => {
                    if (text.includes(term)) { text = text.replace(new RegExp(term, 'g'), `@@${term}@@`); hasChange = true; }
                });
                if (hasChange) {
                    const span = document.createElement('span');
                    span.innerHTML = text.replace(/@@(.*?)@@/g, (m, p1) => {
                        const tip = GLOSSARY[p1];
                        return tip ? `<span class="glossary-term" data-tip="${tip.replace(/"/g, '&quot;')}">${p1}</span>` : p1;
                    });
                    node.parentNode.replaceChild(span, node);
                }
            } else {
                for (let i = node.childNodes.length - 1; i >= 0; i--) {
                    if (node.childNodes[i].className !== 'glossary-term') walkAndReplace(node.childNodes[i]);
                }
            }
        }
        const trendDates = ["01-14", "01-15", "01-16", "01-17"];
        const echartsConfig = {"cumulative_return": {"xAxis": {"type": "category", "data": ["2026-01-14", "2026-01-15", "2026-01-16", "2026-01-17"]}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%"}}, "series": [{"data": [0.0, 0.3, 0.21, 0.19], "type": "line", "smooth": true, "itemStyle": {"color": "#4a90e2"}}]}, "drawdown": {"xAxis": {"type": "category", "data": ["2026-01-14", "2026-01-15", "2026-01-16", "2026-01-17"]}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%"}}, "series": [{"data": [0.0, 0.0, -0.09, -0.1], "type": "line", "smooth": true, "itemStyle": {"color": "#f54343"}, "areaStyle": {"color": "rgba(245,67,67,0.2)"}}]}};

        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        function renderData(data, isPrivate) {
            document.getElementById('mv_display').textContent = data.mv_display;
            const pnlEl = document.getElementById('pnl_display');
            pnlEl.textContent = data.pnl_display;
            pnlEl.style.color = data.pnl_color;

            const table = document.getElementById('holdings_table');
            let tableHeader = '<thead><tr><th>åŸºé‡‘èµ„äº§ (MODE)</th>';
            if (isPrivate) {
                tableHeader += '<th class="text-right">å¸‚å€¼</th><th class="text-right">å½“æ—¥% / å½“æ—¥Â±</th><th class="text-right">ç´¯è®¡</th><th class="text-right">ä¿¡å·</th></tr></thead>';
            } else {
                tableHeader += '<th class="text-right">å æ¯”</th><th class="text-right">å½“æ—¥%</th><th class="text-right">ç´¯è®¡</th><th class="text-right">ä¿¡å·</th></tr></thead>';
            }

            let tableBody = '<tbody>';
            ['A', 'B'].forEach(acc => {
                data.funds.filter(f => f.acc === acc).forEach(f => {
                    const rateCls = f.rate >= 0 ? 'value-positive' : 'value-negative';
                    const cumCls = f.cum >= 0 ? 'value-positive' : 'value-negative';
                    const dailyCombined = isPrivate ? `${f.rate.toFixed(2)}% / ${f.pnl}` : `${f.rate.toFixed(2)}%`;
                    tableBody += `<tr class="fund-card"><td data-label="åŸºé‡‘åç§°" class="fund-name-cell"><span class="fund-name">${f.name} <small class="text-muted">[${f.mode}]</small></span><span class="signal-badge">${f.grid}</span></td>`;
                    if (isPrivate) {
                        tableBody += `<td data-label="å¸‚å€¼" class="text-right value-neutral">${f.mv}</td>`;
                    } else {
                        tableBody += `<td data-label="å æ¯”" class="text-right value-neutral">${f.weight}</td>`;
                    }
                    const dailyLabel = isPrivate ? 'å½“æ—¥% / å½“æ—¥Â±' : 'å½“æ—¥%';
                    tableBody += `<td data-label="${dailyLabel}" class="text-right ${rateCls}">${dailyCombined}</td><td data-label="ç´¯è®¡" class="text-right ${cumCls}">${f.cum.toFixed(2)}%</td><td data-label="ä¿¡å·" class="text-right signal-cell-desktop">${f.grid}</td></tr>`;
                });
            });
            tableBody += '</tbody>';
            table.innerHTML = tableHeader + tableBody;

            // æ¸²æŸ“AIæŠ¥å‘Šï¼ˆå«æŠ•èµ„å­—å…¸æ‚¬æµ®æç¤ºï¼‰
            try {
                const aiEl = document.getElementById('ai-report');
                aiEl.innerHTML = marked.parse(aiReport);
                walkAndReplace(aiEl);
            } catch(e) {
                document.getElementById('ai-report').innerHTML = '<p style="color:#f54343;">AIæŠ¥å‘Šæ¸²æŸ“å¤±è´¥</p>';
            }

            // æ¸²æŸ“è¶‹åŠ¿å›¾ï¼ˆPlotly äº¤äº’å¼ï¼‰
            const trendTrace = { x: trendDates, y: data.t_values, type: 'scatter', mode: 'lines', fill: 'tozeroy',
                line: { color: '#4a90e2', width: 2 }, fillcolor: 'rgba(74,144,226,0.2)' };
            const trendLayout = { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)', margin: { t: 5, b: 5, l: 5, r: 5 },
                xaxis: { visible: false }, yaxis: { visible: false }, height: 45, showlegend: false };
            Plotly.react('trendChart', [trendTrace], trendLayout, { responsive: true, displayModeBar: false });
        }

        function showPrivateData() {
            document.getElementById('statusText').textContent = 'ğŸŸ¢ å®Œæ•´æ¨¡å¼';
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('loginModal').classList.remove('show');
            renderData(privateData, true);
        }

        function showPublicData() {
            document.getElementById('statusText').textContent = 'âšªï¸ å…¬å¼€æ¨¡å¼';
            renderData(publicData, false);
        }

        function handleStatusClick() {
            const isLoggedIn = localStorage.getItem('fundAgentLoggedIn') === 'true';
            if (isLoggedIn) {
                if(confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                    logout();
                }
            } else {
                document.getElementById('loginModal').style.display = 'flex';
                document.getElementById('loginModal').classList.add('show');
            }
        }

        async function login() {
            const password = document.getElementById('passwordInput').value;
            if (!password) {
                document.getElementById('loginError').textContent = 'è¯·è¾“å…¥å¯†ç ';
                return;
            }

            const hash = await sha256(password);
            if (hash === PASSWORD_HASH) {
                localStorage.setItem('fundAgentLoggedIn', 'true');
                showPrivateData();
                document.getElementById('passwordInput').value = '';
                document.getElementById('loginError').textContent = '';
            } else {
                document.getElementById('loginError').textContent = 'å¯†ç é”™è¯¯';
                setTimeout(() => { document.getElementById('loginError').textContent = ''; }, 2000);
            }
        }

        function logout() {
            localStorage.removeItem('fundAgentLoggedIn');
            showPublicData();
        }

        // Plotly ç´¯è®¡æ”¶ç›Šä¸å›æ’¤ï¼ˆäº¤äº’å¼ï¼šæ‚¬åœã€ç¼©æ”¾ã€ä¸‹è½½ï¼‰
        function initPlotlyCharts() {
            if (typeof Plotly === 'undefined') return;
            const cumEl = document.getElementById('cumulative_return_chart');
            const ddEl = document.getElementById('drawdown_chart');
            const cum = echartsConfig.cumulative_return;
            const dd = echartsConfig.drawdown;
            const layoutBase = { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)', font: { color: '#e8e8e8' },
                margin: { t: 20, b: 30, l: 50, r: 20 }, xaxis: { tickfont: { size: 10 } }, yaxis: { tickformat: '.1f', ticksuffix: '%' },
                showlegend: false, height: 220 };
            if (cumEl && cum && cum.xAxis && cum.series && cum.series[0]) {
                const cumTrace = { x: cum.xAxis.data, y: cum.series[0].data, type: 'scatter', mode: 'lines', fill: 'tozeroy',
                    line: { color: '#4a90e2', width: 2 }, fillcolor: 'rgba(74,144,226,0.2)' };
                Plotly.newPlot(cumEl, [cumTrace], { ...layoutBase, yaxis: { ...layoutBase.yaxis, title: '' } }, { responsive: true, displayModeBar: true });
            }
            if (ddEl && dd && dd.xAxis && dd.series && dd.series[0]) {
                const ddTrace = { x: dd.xAxis.data, y: dd.series[0].data, type: 'scatter', mode: 'lines', fill: 'tozeroy',
                    line: { color: '#f54343', width: 2 }, fillcolor: 'rgba(245,67,67,0.2)' };
                Plotly.newPlot(ddEl, [ddTrace], layoutBase, { responsive: true, displayModeBar: true });
            }
        }

        function toggleCompactMode() {
            const container = document.getElementById('holdingsContainer');
            const text = document.getElementById('compactModeText');
            if (container.classList.contains('holdings-compact')) {
                container.classList.remove('holdings-compact');
                text.textContent = 'èˆ’é€‚æ¨¡å¼';
                localStorage.setItem('holdingsMode', 'comfortable');
            } else {
                container.classList.add('holdings-compact');
                text.textContent = 'ç´§å‡‘æ¨¡å¼';
                localStorage.setItem('holdingsMode', 'compact');
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('fundAgentLoggedIn') === 'true') {
                showPrivateData();
            } else {
                showPublicData();
            }
            initPlotlyCharts();
            const mode = localStorage.getItem('holdingsMode');
            const container = document.getElementById('holdingsContainer');
            const text = document.getElementById('compactModeText');
            if (mode === 'comfortable' && container && text) {
                container.classList.remove('holdings-compact');
                text.textContent = 'èˆ’é€‚æ¨¡å¼';
            }
        });

        const tooltip = document.getElementById('tooltip');
        document.addEventListener('mousemove', e => {
            if (e.target.classList && e.target.classList.contains('glossary-term')) {
                tooltip.innerText = e.target.getAttribute('data-tip') || '';
                tooltip.style.display = 'block';
                let x = e.clientX + 10;
                if (x + 280 > window.innerWidth) x = e.clientX - 290;
                tooltip.style.left = x + 'px';
                tooltip.style.top = (e.clientY + 10) + 'px';
            } else {
                tooltip.style.display = 'none';
            }
        });
    </script>
</body>
</html>